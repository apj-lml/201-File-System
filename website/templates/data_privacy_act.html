{% extends 'base.html' %}

{% block title %} NIA PIMO {% endblock %}

{% block cssperfile %} 
    <style rel="stylesheet">
        select.birthday-select{
            border: none;
            background-color:transparent;
            font-weight: bold;
            /* font-style: italic; */
            text-align: left;
            color: rgb(51,10,113);
            color: linear-gradient(152deg, rgba(51,10,113,0.9192051820728291) 3%, rgba(0,5,121,0.8127626050420168) 37%, rgba(34,76,199,1) 98%);
            /* width: auto; */
        }

        .paragraph {
            overflow: hidden;
            max-height: 300px;
            transition: max-height 0.3s ease-out;
        }

        #read-more-btn,
        #read-less-btn {
            display: none;
            cursor: pointer;
            color: rgb(51,10,113);
            color: linear-gradient(152deg, rgba(51,10,113,0.9192051820728291) 3%, rgba(0,5,121,0.8127626050420168) 37%, rgba(34,76,199,1) 98%);
            /* width: auto; */
        }
        
    </style>
{% endblock %}

{% block content %}

        <!-- Navigation-->
        <!-- <nav class="navbar navbar-light bg-light static-top">
            <div class="container">
                <a class="navbar-brand" href="#!">Start Bootstrap</a>
                <a class="btn btn-primary" href="#signup">Sign Up</a>
            </div>
        </nav> -->
		
        <!-- Masthead-->
        <div class="container-fluid vw-100 p-0 w-0">
            <header class="masthead pt-5 col-sm-12 me-0 w-100 vh-100">
                <div class="container position-relative">
                    <div class="row justify-content-center">
                        <div class="col-xl-12">
                            <div class="text-center text-white">
                                <img src="{{url_for('static', filename='img/nia-logo.png')}}" alt="" width="250px" height="250px" class="d-inline-block align-text-center mb-5">
                                                    
                                <h3 class="mb-3 mt-0 text-white"><span style="font-size: larger;">DATA PRIVACY ACT</span></h3>
                                <p class="container fs-5"><i id="quote">

                                    Before you continuing please take a moment to understand and acknowledge that we are committed to safeguarding your data privacy in 
                                    accordance with the Republic Act No. 10173, Data Privacy Act of the Philippines. We are dedicated to ensuring the security and confidentiality of your 
                                    personal information. Please review our <a href="#" class="text-warning" onclick="fireDataPrivacy();">Privacy Policy </a> if you have any concerns about how we handle your data.

                                </i></p>
                                <p class="text-center" style="font-size: large;">
                                    <button class="btn btn-success shadow" id="continue" {% if user_profile.data_privacy != "checked" %}disabled{% endif %} onclick="continueBtn()">Continue</button>
                                    <a href="/" class="btn btn-secondary shadow">Go Back</a>
                                </p>
                                <p>
                                    Read about our <u><a href="#" class="link-warning" onclick="fireDataPrivacy();">Privacy Policy </a></u>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <!-- Icons Grid-->




        </div>
     




		{% endblock %}

        {% block scripts %}


        <script type="application/javascript">

            
           function continueBtn(){
            loadingScreen('block');
            let btnClick;
            fetch('/data-privacy-act', {
                method: 'POST',
                body: JSON.stringify({ btnClick: 'true' })
              }).then((res)=>{
                if(res.status == 200){
                    if (res.redirected) {
                        // Redirect the user to the new location
                        window.location.href = res.url;
                      }
                }
              });
             }

    {% if request.path == "/data-privacy-act" and user_profile.data_privacy != "checked" %}

             fireDataPrivacy();

    {% endif %}

    function fireDataPrivacy(){
        Swal.fire({
            title: '<strong>Privacy Policy</strong>',
            icon: 'info',
            width: 1200,
            allowOutsideClick: false,
            showCloseButton: false,
            html:
                     `
    <p class='text-start fs-12'>
      Last Updated: October 27, 2023<br><br>

      The Pangasinan Irrigation Management Office (PIMO) is dedicated to protecting the privacy and personal information of individuals using our Online 201 File System. This Privacy Policy outlines how we collect, use, disclose, and safeguard your data. By accessing and using the Online 201 File System, you consent to the terms and practices described in this policy.<br><br>
      
      1. Information We Collect<br><br>
      
      1.1. Personal Information: We may collect personal information, including but not limited to names, addresses, contact information, and identification details, from users who interact with the Online 201 File System.<br><br>
      
      1.2. Non-Personal Information: We may also collect non-personal information, such as IP addresses, browser type, and usage data, to enhance the functionality and security of our system.<br><br>
      <br>
      2. How We Use Your Information<br><br>
      
      2.1. User Verification: We use your personal information to verify your identity and grant access to the Online 201 File System.<br><br>
      
      2.2. System Functionality: Your information may be used to ensure the proper operation and functionality of the system.<br><br>
      
      2.3. Communication: We may use the contact information to keep you informed about important information and communications. Our methods of communication may include contacting you through your cellphone number, email address, or sending physical mail to the address you have provided in the system. It's important to note, however, that these communication practices are subject to certain limitations, as outlined below:<br><br>
      • We want to emphasize that we will never ask you to share sensitive personal information like passwords or financial details through email, text messages, or other electronic communication methods. Please avoid sharing such information with anyone who claims to represent PIMO through these channels. If you receive any unexpected or suspicious requests for such information, please let us know immediately.<br><br>
      • While we do our best to secure our communication channels, it's essential to recognize that electronic and postal communication always carries some level of risk. We cannot guarantee absolute security, so we encourage you to be cautious when sharing information through these means.<br><br>
      • If you ever need to verify the legitimacy of a communication that appears to be from PIMO, please contact us directly through our official contact information provided in Section 8.<br><br>
      
      2.4. Report Generation and Submission: Your data may also be used to generate and submit reports to improve Administrative services and meet specific organizational needs with the Online 201 File System.<br><br>
      <br>
      3. Data Security<br><br>
      
      3.1. Protection: We implement industry-standard security measures to safeguard your data against unauthorized access, disclosure, alteration, or destruction.<br><br>
      
      3.2. Access Control: Access to your personal information is restricted to authorized Administrative Unit personnel only.<br><br>
      <br>
      4. Disclosure of Information<br><br>
      
      4.1. Legal Compliance and Consent: Our practices regarding the sharing of information align with the provisions of the Data Privacy Act of the Philippines. We adhere to the following principles when disclosing information:<br><br>
      (a) When you have provided us with your explicit consent, we process your data in accordance with your preferences.<br><br>
      (b) We process information when it is necessary to fulfill contractual obligations with you or to take steps leading to the establishment of a contract.<br><br>
      (c) If there exists a legal obligation mandating the use of your data, we ensure strict adherence to such legal requirements.<br><br>
      (d) In circumstances where safeguarding the life and health of an individual is paramount, and that individual is incapable of providing consent, we may process the data in question.<br><br>
      (e) We may process data when it is essential to respond to national emergencies, maintain public order and safety, or fulfill the functions of public authority, always ensuring that such processing aligns with the mandate and responsibilities of public organizations.<br><br>
      (f) When processing is required for legitimate interests pursued by us or a third party, we exercise this right while respecting your fundamental rights and freedoms, which are constitutionally protected.<br><br>
      4.2. Third Parties: We do not share your personal information with third parties without your explicit consent unless required by law.<br><br>
      <br>
      5. Access and Control of Your Information<br><br>
      
      5.1. Data Access: The right to access the personal information stored in our system is exclusively granted to active employees of PIMO. Should you wish to inquire about the specifics of the information retained, we encourage you to contact us. Subsequently, we will provide comprehensive guidance on the procedure for accessing your information.<br><br>
      
      5.2. Control of Data: In addition to data access, you, as an active employee, possess the capacity to rectify or update your personal information within our system. In the event you identify inaccuracies or changes in your data, we kindly request that you reach out to us. We are committed to aiding you in maintaining the accuracy and currency of your information.<br><br>
      <br>
      6. Cookies<br><br>
      
      6.1. Utilization of Cookies: Cookies are small data files that are placed on your computer or device when you visit our Online 201 File System. These files serve various functions, including enhancing your user experience by allowing our system to recognize and remember your preferences. They enable us to tailor our services and content to better align with your needs.<br><br>
      <br>
      7. Changes to this Privacy Policy<br><br>
      
      7.1. Amendments to the Privacy Policy: We reserve the right to modify this Privacy Policy as required. Any alterations will be duly posted on this page, along with the effectivity date. We recommend that you routinely review this page to remain apprised of any updates. Your continued use of the Online 201 File System subsequent to these revisions signifies your consent to the revised terms and practices outlined herein.<br><br>
      <br>
      8. Contact Information 8.1. If you have questions, concerns, or requests related to this Privacy Policy, please contact the designated Compliance Officer for Privacy (COP):<br><br>
       ALJOHN P. JACINTO <br>
       Industrial Relations Management Officer C <br>
       Email: pimo.adm02@gmail.com Telephone: (075) 505-155<br><br>
      
      The National Irrigation Administration - Pangasinan Irrigation Management Office values your privacy and is committed to protecting your personal information. By using the Online 201 File System, you agree to the terms outlined in this Privacy Policy.
      
    </p>
    
      <div class="d-inline-flex justify-content-center">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="acknowledgement" {% if user_profile.data_privacy == "checked" %} checked {% endif %} onchange="acknowledge(this)">
          <label class="form-check-label" for="acknowledgement">
            I agree
          </label>
        </div>
      </div>
                     `,
                    showCancelButton: true,
                    focusConfirm: true,
                    confirmButtonText:
                      'Proceed',
                    cancelButtonText:
                      'Cancel',
            preConfirm: ()=>{
              let ack = document.getElementById("acknowledgement");
              if(ack.checked){
                return undefined;
              }else{
                Swal.fire('Failed to Agree on Privacy Policy!', 'You have not agreed to the Privacy Policy and therefore can not proceed.', 'warning')
                return false;
              }
            }
                  }).then((result) => {
                    if (result.isConfirmed) {
                      let checkbox = document.getElementById('acknowledgement');
                      let checkboxVal = 'checked';
                      if(!checkbox.checked){
                        checkboxVal = 'unchecked';
                      }
    
                      fetch('/employees/update_data_privacy', {
                        method: 'POST',
                        body: JSON.stringify({ checkboxVal: checkboxVal })
                      }).then((res)=>{
                        if(res.status == 200){
                            let continueBtn = document.getElementById('continue');
                            continueBtn.disabled = false;
    
                        }
                      });
                    }
                  });
    }


    window.onload = (event) => {
        const confirmButton = Swal.getConfirmButton();
        confirmButton.setAttribute('disabled', 'true');
      };

          


            function acknowledge(el){
                const confirmButton = Swal.getConfirmButton();
        confirmButton.setAttribute('disabled', 'true');
                console.log('button: ', confirmButton)
                //const confirmButton = Swal.getConfirmButton();
                //confirmButton.setAttribute('disabled', 'true');

                if(el.checked){
                    confirmButton.disabled = false;
                }else{
                    confirmButton.setAttribute('disabled', 'true');

                }

            }
        </script>
        {% endblock %}